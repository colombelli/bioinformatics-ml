from DataManager import DataManager
from Evaluator import Evaluator
from InformationManager import InformationManager
import rpy2.robjects.packages as rpackages
from time import time


num_bootstraps = 50
num_folds = 5

aggregator = "mean"

ths = [1, 5, 10, 15, 25, 50, 75, 100, 150, 200]
seed = 42

str_methods = ["ReliefF", "GeoDE", "Gain Ratio", "Symmetrical Uncertainty", "OneR"]
str_aggregators = ["Mean Aggregation", "Mean Aggregation"]


experiment_path = "/home/colombelli/Documents/ExperimentsNewTHs/BRCA/test/"
dataset_path = "/home/colombelli/Documents/datasets/research/brca.rds"



dm = DataManager(experiment_path, dataset_path, num_bootstraps, num_folds, seed)

ev = Evaluator(dm, ths, False)
im = InformationManager(dm, ev, str_methods, str_aggregators)

print("\n\nStarting evaluation process...")
#aucs, stabilities = ev.evaluate_intermediate_hyb_rankings()


aucs = [[0.9499054820415879, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9940711462450592, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9980237154150198, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9446640316205532, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9631379962192816, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9940711462450592, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9980237154150198, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9446640316205532, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9688090737240075, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9940711462450592, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9980237154150198, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9446640316205532, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9612476370510397, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9940711462450592, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9980237154150198, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9446640316205532, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9631379962192816, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9940711462450592, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9980237154150198, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0], [0.9446640316205532, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]]
stabilities = [[1.0, 0.5748688030006549, 0.5122235386482057, 0.487996464100423, 0.4788748948679188, 0.47022506620857407, 0.4687118176913677, 0.487175104415734, 0.5077074870147036, 0.5221428778153316], [0.8832569798247395, 0.5431840345727347, 0.5098545020749016, 0.5110960064734188, 0.49287536847262375, 0.48520092027362827, 0.47806798740721124, 0.487586199677774, 0.5119927879680456, 0.5248301900834133], [0.8473360505400411, 0.5431840345727367, 0.48003731761779067, 0.4690918857904472, 0.4659211856448751, 0.4739116823624447, 0.47636089679239035, 0.48681334058513903, 0.49730504272359816, 0.5128967017065127], [0.8114151212553489, 0.5085594422700601, 0.48689935458874073, 0.4994917552341529, 0.49438009227126073, 0.48638063744286564, 0.4894814201716839, 0.5050824140301899, 0.5215535749473916, 0.5344324661229799], [1.0, 0.5090494129158529, 0.46214700694352323, 0.4631535600388986, 0.4776318621646981, 0.4915419000582841, 0.48925161951199553, 0.49764158978726936, 0.5233689142472653, 0.5413391485007281]]

print("\n\nAUCs:")
print(aucs)

print("\n\nStabilities:")
print(stabilities)

im.create_level2_csv_tables(aucs, stabilities)

"""
    print("\n\nCreating csv files...")
    im.create_csv_tables()

    print("\nExperiment", e,"reevaluated!\n\n")
"""